sudo ssh-keygen -t rsa -b 4096 -f ~/.ssh/github-deploy
sudo chown ubuntu:ubuntu ~/.ssh/github-deploy
sudo chmod 600 ~/.ssh/authorized_keys
sudo chmod 600 ~/.ssh/github-deploy
sudo cat ~/.ssh/github-deploy.pub >> ~/.ssh/authorized_keys
sudo cat ~/.ssh/github-deploy.pub

# Install docker and docker compose
sudo apt update && sudo apt upgrade -y
sudo apt install docker.io -y
sudo usermod -a -G docker $USER
sudo apt-get install docker-compose -y

# Install Python and pip
sudo apt update && sudo apt upgrade -y
sudo apt install -y software-properties-common
sudo add-apt-repository -y ppa:deadsnakes/ppa
sudo apt update
sudo apt install -y python3.11 python3.11-venv python3.11-dev
sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.11 1
sudo update-alternatives --config python3
python3 -m ensurepip --default-pip
python3 -m pip install --upgrade pip

sudo reboot

eval "$(ssh-agent -s)"
ssh-add ~/.ssh/github-deploy
ssh -T git@github.com
git clone git@github.com:Abhishek-2502/RAG.git

# Run docker compose
cd RAG/
git remote update origin
git checkout Deploy
pip download -r requirements.txt -d wheelhouse
docker-compose up --build -d


# Clean Up if no space left on device
docker system prune -a --volumes
docker system prune -af
docker volume prune -f


# NOTE
CHANGE frontend url in main.py while deploying